#!/usr/bin/env just --justfile
# https://github.com/casey/just

build-jar :
	./gradlew jar

jar-files :
	rm -rf jar-files
	./gradlew dependencies --configuration testCompileOnly
	./gradlew extractAllJars
	tree -I '* (androidx.*|* (com.google.android.material_material_*' jar-files

out JAR_FILES :
	rm -f out/android.d.ts
	java -jar build/libs/dts-generator.jar -skip-declarations \
	-super $ANDROID_HOME/platforms/android-29/android.jar -super jar-files \
	-input-generics ../libs/generics.txt -input jar-files/*{{JAR_FILES}}*

pbcopy :
	pbcopy < out/android.d.ts
